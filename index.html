<!DOCTYPE html>
<html lang="pt-BR" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TodoHub â€” Gerenciador de Tarefas</title>
  <meta name="description" content="TodoHub - Organize sua vida, uma tarefa de cada vez">
  <meta name="theme-color" content="#00bcd4">
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“‹</text></svg>">
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  
  <!-- CSS -->
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- LOADER -->
  <div id="appLoader">
    <div class="loader-content">
      <div class="spinner"></div>
      <p>Carregando TodoHub...</p>
    </div>
  </div>

  <!-- TOASTS -->
  <div id="toastStack"></div>

  <!-- LOGIN SCREEN -->
  <div id="loginScreen" class="login-screen">
    <div class="login-card">
      <div class="login-header">
        <div class="login-logo">ğŸ“‹</div>
        <h1>TodoHub</h1>
        <p>Organize sua vida, uma tarefa de cada vez</p>
      </div>
      <div class="login-buttons">
        <button class="login-btn google" id="loginGoogle">
          <svg viewBox="0 0 24 24" width="20" height="20">
            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          Entrar com Google
        </button>
        <button class="login-btn github" id="loginGithub">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
          </svg>
          Entrar com GitHub
        </button>
      </div>
      <div class="login-divider">
        <span>ou continue como convidado</span>
      </div>
      <button class="login-btn guest" id="loginGuest">
        ğŸ‘¤ Modo Convidado
      </button>
      <p class="login-note">
        No modo convidado, seus dados ficam salvos apenas neste dispositivo.
      </p>
    </div>
  </div>

  <!-- SIDEBAR OVERLAY -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>

  <!-- SIDEBAR -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <h3>ğŸ“‚ Listas</h3>
      <button class="sidebar-close" id="closeSidebar">âœ•</button>
    </div>
    <ul class="sidebar-list" id="listContainer"></ul>
    <div class="sidebar-section">
      <div class="sidebar-section-title">âŒ¨ï¸ Atalhos</div>
      <div class="shortcuts-list">
        <div><span>Nova tarefa</span><kbd>N</kbd></div>
        <div><span>Buscar</span><kbd>/</kbd></div>
        <div><span>SeleÃ§Ã£o</span><kbd>Shift+S</kbd></div>
        <div><span>Tema</span><kbd>T</kbd></div>
        <div><span>Kanban/Lista</span><kbd>V</kbd></div>
      </div>
    </div>
    <div class="sidebar-footer">
      <button class="new-list-btn" id="newListBtn">â• Nova Lista</button>
    </div>
  </aside>

  <!-- APP CONTAINER -->
  <div id="appContainer" class="app-container hidden">
    <!-- HEADER -->
    <header class="app-header">
      <div class="header-left">
        <button class="menu-btn" id="openSidebar">â˜°</button>
        <div class="brand">
          <div class="brand-logo">TH</div>
          <span class="brand-title">TodoHub</span>
        </div>
      </div>
      <div class="header-actions">
        <button class="icon-btn" id="themeToggle" title="Alternar tema (T)">
          <span id="themeIcon">ğŸŒ™</span>
        </button>
        <div class="user-menu" id="userMenu">
          <button class="user-btn" id="userBtn">
            <img id="userAvatar" src="" alt="" class="user-avatar">
            <span id="userName">UsuÃ¡rio</span>
          </button>
          <div class="user-dropdown" id="userDropdown">
            <div class="user-info">
              <img id="dropdownAvatar" src="" alt="" class="dropdown-avatar">
              <div>
                <div id="dropdownName">UsuÃ¡rio</div>
                <div id="dropdownEmail" class="user-email">email@exemplo.com</div>
              </div>
            </div>
            <hr>
            <button class="dropdown-item" id="logoutBtn">ğŸšª Sair</button>
          </div>
        </div>
      </div>
    </header>

    <!-- MAIN -->
    <main class="container">
      <!-- STATS -->
      <div class="stats">
        <div class="stat-card">
          <span class="stat-icon">ğŸ“‹</span>
          <div class="stat-info">
            <span class="stat-title">Total</span>
            <span class="stat-number" id="totalCount">0</span>
          </div>
        </div>
        <div class="stat-card">
          <span class="stat-icon">â³</span>
          <div class="stat-info">
            <span class="stat-title">Ativas</span>
            <span class="stat-number" id="activeCount">0</span>
          </div>
        </div>
        <div class="stat-card success">
          <span class="stat-icon">âœ…</span>
          <div class="stat-info">
            <span class="stat-title">ConcluÃ­das</span>
            <span class="stat-number" id="doneCount">0</span>
          </div>
        </div>
        <div class="stat-card danger">
          <span class="stat-icon">âš ï¸</span>
          <div class="stat-info">
            <span class="stat-title">Atrasadas</span>
            <span class="stat-number" id="overdueCount">0</span>
          </div>
        </div>
        <div class="stat-card warning">
          <span class="stat-icon">â­</span>
          <div class="stat-info">
            <span class="stat-title">Favoritas</span>
            <span class="stat-number" id="favoriteCount">0</span>
          </div>
        </div>
      </div>

      <!-- CHARTS -->
      <div class="charts-section">
        <div class="chart-card">
          <div class="chart-title">ğŸ“Š Progresso Geral</div>
          <div class="chart-container">
            <div class="donut-chart" id="donutChart">
              <div class="donut-center">
                <div class="donut-value" id="donutValue">0%</div>
                <div class="donut-label">concluÃ­do</div>
              </div>
            </div>
          </div>
        </div>
        <div class="chart-card">
          <div class="chart-title">ğŸ“ˆ Por Prioridade</div>
          <div class="progress-chart">
            <div class="progress-item">
              <span class="progress-label">ğŸ”´ Alta</span>
              <div class="progress-bar"><div class="progress-fill high" id="highBar"></div></div>
              <span class="progress-value" id="highCount">0</span>
            </div>
            <div class="progress-item">
              <span class="progress-label">ğŸŸ¡ MÃ©dia</span>
              <div class="progress-bar"><div class="progress-fill medium" id="mediumBar"></div></div>
              <span class="progress-value" id="mediumCount">0</span>
            </div>
            <div class="progress-item">
              <span class="progress-label">ğŸŸ¢ Baixa</span>
              <div class="progress-bar"><div class="progress-fill low" id="lowBar"></div></div>
              <span class="progress-value" id="lowCount">0</span>
            </div>
          </div>
        </div>
      </div>

      <!-- ADD TASK -->
      <div class="add-task">
        <div class="add-task-row">
          <div class="add-task-inputs">
            <input type="text" class="input" id="taskInput" placeholder="âœï¸ O que precisa ser feito?" maxlength="200">
            <div class="input-row">
              <input type="text" class="input input-sm" id="tagInput" placeholder="ğŸ·ï¸ Tags (separar por vÃ­rgula)">
              <input type="date" class="input input-sm" id="dueDateInput">
              <input type="time" class="input input-sm" id="dueTimeInput">
            </div>
            <textarea class="input" id="notesInput" placeholder="ğŸ“ Notas/descriÃ§Ã£o (opcional)" rows="2"></textarea>
          </div>
          <div class="add-task-actions">
            <div class="priority-picker" id="priorityPicker">
              <button type="button" class="prio-btn" data-priority="low" title="Baixa">ğŸŸ¢</button>
              <button type="button" class="prio-btn active" data-priority="medium" title="MÃ©dia">ğŸŸ¡</button>
              <button type="button" class="prio-btn" data-priority="high" title="Alta">ğŸ”´</button>
            </div>
            <button class="btn primary" id="addTaskBtn">â• Adicionar</button>
          </div>
        </div>
      </div>

      <!-- VIEW CONTROLS -->
      <div class="view-controls">
        <div class="view-tabs">
          <button class="view-tab active" data-view="list">ğŸ“‹ Lista</button>
          <button class="view-tab" data-view="kanban">ğŸ“Š Kanban</button>
        </div>
        <div class="sort-controls">
          <label>Ordenar:</label>
          <select class="sort-select" id="sortSelect">
            <option value="created-desc">Mais recentes</option>
            <option value="created-asc">Mais antigas</option>
            <option value="alpha-asc">A â†’ Z</option>
            <option value="alpha-desc">Z â†’ A</option>
            <option value="priority-high">Prioridade â†“</option>
            <option value="priority-low">Prioridade â†‘</option>
            <option value="due-asc">Vencimento â†‘</option>
          </select>
        </div>
      </div>

      <!-- BULK BAR -->
      <div class="bulk-bar hidden" id="bulkBar">
        <span class="bulk-label" id="bulkCount">0 selecionadas</span>
        <div class="bulk-actions">
          <button class="btn" id="bulkFavoriteBtn">â­ Favoritar</button>
          <button class="btn" id="bulkDoneBtn">âœ… Concluir</button>
          <button class="btn danger" id="bulkDeleteBtn">ğŸ—‘ï¸ Excluir</button>
          <button class="btn" id="bulkExitBtn">âŒ Cancelar</button>
        </div>
      </div>

      <!-- TOOLBAR -->
      <div class="toolbar">
        <div class="filters" id="filtersContainer">
          <button class="chip active" data-filter-state="all">Todas</button>
          <button class="chip" data-filter-state="active">Ativas</button>
          <button class="chip" data-filter-state="done">ConcluÃ­das</button>
          <button class="chip" data-filter-state="favorites">â­ Favoritas</button>
          <span class="filter-divider"></span>
          <button class="chip prio-chip" data-filter-priority="high">ğŸ”´</button>
          <button class="chip prio-chip" data-filter-priority="medium">ğŸŸ¡</button>
          <button class="chip prio-chip" data-filter-priority="low">ğŸŸ¢</button>
        </div>
        <div class="search-box">
          <span>ğŸ”</span>
          <input type="text" id="searchInput" placeholder="Buscar... (/)">
        </div>
      </div>

      <!-- LIST VIEW -->
      <div class="card-container" id="listView">
        <ul class="list" id="taskList"></ul>
        <div class="empty" id="emptyState">
          <div class="empty-icon">ğŸ“</div>
          <p>Nenhuma tarefa encontrada.<br>Pressione <kbd>N</kbd> para adicionar!</p>
        </div>
      </div>

      <!-- KANBAN VIEW -->
      <div class="kanban-container" id="kanbanView">
        <div class="kanban-column todo">
          <div class="kanban-header">
            <span class="kanban-title">ğŸ“‹ A Fazer</span>
            <span class="kanban-count" id="kanbanTodoCount">0</span>
          </div>
          <div class="kanban-list" id="kanbanTodo"></div>
        </div>
        <div class="kanban-column doing">
          <div class="kanban-header">
            <span class="kanban-title">ğŸ”„ Fazendo</span>
            <span class="kanban-count" id="kanbanDoingCount">0</span>
          </div>
          <div class="kanban-list" id="kanbanDoing"></div>
        </div>
        <div class="kanban-column done">
          <div class="kanban-header">
            <span class="kanban-title">âœ… Feito</span>
            <span class="kanban-count" id="kanbanDoneCount">0</span>
          </div>
          <div class="kanban-list" id="kanbanDone"></div>
        </div>
      </div>
    </main>

    <!-- FOOTER -->
    <footer class="app-footer">
      <p>TodoHub Â© 2026 â€” Feito por Teilon Oliveira Santos</p>
    </footer>
  </div>

  <!-- EDIT DIALOG -->
  <div class="dialog-overlay" id="editDialog">
    <div class="dialog-card">
      <div class="dialog-header">
        <h3>âœï¸ Editar Tarefa</h3>
        <button class="dialog-close" id="editClose">âœ•</button>
      </div>
      <form class="dialog-form" id="editForm">
        <div class="form-group">
          <label>Texto da tarefa *</label>
          <input type="text" class="input" id="editText" required>
        </div>
        <div class="form-group">
          <label>Prioridade</label>
          <div class="priority-picker" id="editPriorityPicker">
            <button type="button" class="prio-btn" data-priority="low">ğŸŸ¢</button>
            <button type="button" class="prio-btn active" data-priority="medium">ğŸŸ¡</button>
            <button type="button" class="prio-btn" data-priority="high">ğŸ”´</button>
          </div>
        </div>
        <div class="form-group">
          <label>Status (Kanban)</label>
          <select class="input" id="editStatus">
            <option value="todo">ğŸ“‹ A Fazer</option>
            <option value="doing">ğŸ”„ Fazendo</option>
            <option value="done">âœ… Feito</option>
          </select>
        </div>
        <div class="form-group">
          <label>Tags</label>
          <input type="text" class="input" id="editTags" placeholder="trabalho, pessoal, urgente">
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Data de vencimento</label>
            <input type="date" class="input" id="editDueDate">
          </div>
          <div class="form-group">
            <label>HorÃ¡rio</label>
            <input type="time" class="input" id="editDueTime">
          </div>
        </div>
        <div class="form-group">
          <label>Notas</label>
          <textarea class="input" id="editNotes" rows="3" placeholder="Detalhes adicionais..."></textarea>
        </div>
        <div class="form-group">
          <label>Subtarefas</label>
          <div class="subtask-editor">
            <ul class="subtask-list" id="subtasksList"></ul>
            <div class="subtask-add">
              <input type="text" class="input" id="newSubtaskText" placeholder="Nova subtarefa...">
              <button type="button" class="btn" id="addSubtaskBtn">â•</button>
            </div>
          </div>
        </div>
        <div class="dialog-actions">
          <button type="button" class="btn" id="editCancelBtn">Cancelar</button>
          <button type="submit" class="btn primary">ğŸ’¾ Salvar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- SCRIPTS -->
  <script src="js/storage.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
